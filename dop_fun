# Загрузка библиотек
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

test = pd.read_csv('data.csv', delimiter=';', index_col='data')

# Log of percentage change Логарифм в процентном соотношении
tesla = test['TSLA'].pct_change().apply(lambda x: np.log(1+x))
fb = test['FB'].pct_change().apply(lambda x: np.log(1+x))
print(tesla.head())


# Variance Диспперсия
var_tesla = tesla.var()
var_fb = fb.var()
print(var_tesla)

# Volatility Волатильность
tesla_vol = np.sqrt(var_tesla * 250)
fb_vol = np.sqrt(var_fb * 250)
print(tesla_vol)

# Log of Percentage change Датасет с процентным изменением
test1 = test.pct_change().apply(lambda x: np.log(1+x))
print(test1.head())

# Covariance Ковариация
print(test1['TSLA'].cov(test1['FB']))

# Корреляция
print(test1['TSLA'].corr(test1['FB']))

test2 = test.pct_change().apply(lambda x: np.log(1+x))
test2.head()

# Define weights for allocation Определение весов
w = [0.2, 0.8]
e_r_ind = test2.mean()
print(e_r_ind)

# Total expected return Общая доходность
e_r = (e_r_ind*w).sum()
print(e_r)
